<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0," />
    <title>My Website-台北市政府提供景點公開資料</title>
    <link rel="stylesheet" type="text/css" href="rwd-layout.css" />
  </head>
  <body
    style="
      margin-top: 0px;
      margin-right: 0px;
      margin-left: 0px;
      margin-bottom: 0px;
    "
  >
    <div class="desktop-menu">
      <div class="menu">
        <!--右上選單-->
        <div class="desktop-menu-left" style="margin-left: 10px; display: grid">
          My Website
        </div>
        <div class="desktop-menu-right">
          <div class="item">Item1</div>
          <div class="item">Item2</div>
          <div class="item">Item3</div>
          <div class="item">Item4</div>
        </div>
        <div class="mobile-menu">
          <!--漢堡圖設定-->
          <div class="mobile-menu-icon">
            <img
              src="menu.png"
              width="30px"
              height="30px"
              style="margin: 10px"
            />
          </div>
        </div>
      </div>

      <div class="headline">
        <!--歡迎欄-->
        <div class="welcome">Welcome to MyHome</div>
      </div>

      <div class="list">
        <!--中央列表 上半區-->
        <div class="list-block-1">
          <div class="promotion" id="name0">
            <img
              id="photo0"
              width="80px"
              height="50px"
              style="margin-right: 10px"
            />
          </div>

          <div class="promotion" id="name1" style="margin: 10px">
            <img
              id="photo1"
              width="80px"
              height="50px"
              style="margin-right: 10px"
            />
          </div>
        </div>
      </div>

      <div class="list-2">
        <!--中央列表 下半區-->
        <div class="list-block-2">
          <div class="title-item">
            <div class="img">
              <img class="image" id="photo2" id="photo2" />
            </div>
            <div class="title" id="name2"></div>
          </div>

          <div class="title-item">
            <div class="img"><img class="image" id="photo3" /></div>
            <div class="title" id="name3"></div>
          </div>

          <div class="title-item">
            <div class="img"><img class="image" id="photo4" /></div>
            <div class="title" id="name4"></div>
          </div>

          <div class="title-item">
            <div class="img"><img class="image" id="photo5" /></div>
            <div class="title" id="name5"></div>
          </div>

          <div class="title-item">
            <div class="img"><img class="image" id="photo6" /></div>
            <div class="title" id="name6"></div>
          </div>

          <div class="title-item">
            <div class="img"><img class="image" id="photo7" /></div>
            <div class="title" id="name7"></div>
          </div>

          <div class="title-item">
            <div class="img"><img class="image" id="photo8" /></div>
            <div class="title" id="name8"></div>
          </div>

          <div class="title-item">
            <div class="img"><img class="image" id="photo9" /></div>
            <div class="title" id="name9"></div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    // 利用 fetch 進行連線並取得資料{
    fetch(
      "https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment.json"
    )
      .then(function (response) {
        return response.json();
      })
      .then(function (data) {
        let posts = data["result"]["results"];
        let array = [];
        for (i = 0; i < posts.length; i++) {
          let post = posts[i];
          let text = posts[i]["stitle"];
          let names = "name" + i;
          console.log(names);
          addtitle(text, names);
          console.log(posts[i]["stitle"]); //景點名稱

          let file = post["file"];
          if (file.search(".jpg")) {
            //尋找副檔名為.jpg結尾的連結
            a = post["file"].split("jpg")[0]; //分隔後將第一張圖片連結存入 a 陣列
            firstfile = a + "jpg";
          }
          if (a.search(".JPG") > 0) {
            //尋找尚有多個副檔名為.JPG結尾的連結
            b = post["file"].split(".JPG")[0]; //分隔後將第一張圖片連結存入 b 陣列
            firstfile = b + ".JPG";
          }
          let link = firstfile;
          let tags = "photo" + i;
          console.log(link);
          console.log(tags);
          addphoto(link, tags);
        }
        function addtitle(text, names) {
          var theviewtitle = document.getElementById(names);
          var _text = document.createTextNode(text);
          theviewtitle.appendChild(_text);
        }

        function addphoto(link, tags) {
          var bigImg = document.getElementById(tags);
          bigImg.src = link;
          console.log(bigImg);

          // var theviewphoto = document.getElementById(tags);
          // theviewphoto.src = link;
          // console.log(theviewphoto.src);
        }

        datalist = [str(post["stitle"]), str(firstfile)];
        array.append(datalist);

        // console.log(data);
      });
  </script>
</html>
